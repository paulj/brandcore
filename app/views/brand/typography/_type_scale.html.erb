<% if typeface&.name.present? %>
  <div class="mt-8" id="type-scale-<%= typeface.id %>">
    <h3 class="text-lg font-semibold text-gray-900 mb-4">Type Scale</h3>
    <p class="text-gray-600 text-sm mb-6">Define font sizes, line heights, and variants for your typeface.</p>
    
    <%= form_with model: [@brand, typeface], url: update_typeface_brand_typography_path(@brand), method: :patch, 
                  data: { turbo: true, turbo_action: "morph", controller: "autosave", autosave_target: "form" } do |f| %>
      
      <%= f.hidden_field :id %>
      
      <div class="bg-white border border-gray-200 rounded-lg overflow-hidden">
        <table class="w-full">
          <thead class="bg-gray-50 border-b border-gray-200">
            <tr>
              <th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Preview</th>
              <th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Font Size</th>
              <th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Line Height</th>
              <th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Variant</th>
              <th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Font Weight</th>
              <th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"></th>
            </tr>
          </thead>
          <tbody id="type-scale-items-<%= typeface.id %>">
            <% if typeface.type_scale.present? %>
              <% typeface.type_scale.each_with_index do |scale, index| %>
                <%= render "type_scale_item", f: f, typeface: typeface, scale: scale, index: index %>
              <% end %>
            <% else %>
              <tr id="no-scale-items-<%= typeface.id %>">
                <td class="px-4 py-8 text-center text-gray-500 text-sm" colspan="6">
                  No scale items yet. Click "Add Scale" below to create your first type scale item.
                </td>
              </tr>
            <% end %>
            
            <tr class="bg-gray-50" id="add-scale-row-<%= typeface.id %>">
              <td class="px-4 py-3" colspan="6">
                <%= link_to add_type_scale_item_brand_typography_path(@brand, typeface_id: typeface.id),
                    method: :post,
                    data: { turbo: true, turbo_stream: true, turbo_method: "post" },
                    class: "inline-flex items-center text-sm text-gray-600 hover:text-black transition-colors" do %>
                  <i class="fa-solid fa-plus mr-2"></i>
                  Add Scale
                <% end %>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    <% end %>
  </div>
<% end %>
