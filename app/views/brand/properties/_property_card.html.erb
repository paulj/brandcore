<%# Complete property card with field and suggestions
    Usage: <%= render "brand/properties/property_card", brand: @brand, property_name: "mission" %>
%>
<% configuration = PropertyConfiguration.for(property_name) %>
<% suggestions = brand.properties.for_property(property_name).suggestions %>

<div class="bg-white rounded-lg shadow p-6 space-y-4">
  <%# Header %>
  <div class="flex items-start justify-between">
    <div class="flex items-start gap-3">
      <div class="mt-1">
        <i class="<%= configuration.icon %> text-blue-600"></i>
      </div>
      <div>
        <h3 class="text-lg font-semibold text-gray-900"><%= configuration.label %></h3>
        <p class="text-sm text-gray-600"><%= configuration.description %></p>
      </div>
    </div>

    <%# AI Help Button %>
    <button
      type="button"
      data-turbo-method="post"
      class="px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 text-sm font-medium flex items-center gap-2"
      onclick="event.preventDefault(); fetch('<%= generate_brand_properties_path(brand, property_name: property_name) %>', { method: 'POST', headers: { 'X-CSRF-Token': document.querySelector('meta[name=csrf-token]').content } })"
    >
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
      </svg>
      AI Help
    </button>
  </div>

  <%# Field %>
  <div class="space-y-2">
    <%= render "brand/properties/fields/#{configuration.input_type}",
      brand: brand,
      property_name: property_name,
      configuration: configuration %>
  </div>

  <%# Suggestions %>
  <% if suggestions.any? || params[:show_suggestions] == property_name %>
    <div class="pt-4 border-t border-gray-200">
      <h4 class="text-sm font-medium text-gray-700 mb-3">AI Suggestions</h4>
      <%= render "brand/properties/suggestions",
        brand: brand,
        property_name: property_name,
        configuration: configuration,
        suggestions: suggestions %>
    </div>
  <% else %>
    <div id="<%= property_name %>_suggestions"></div>
  <% end %>
</div>
