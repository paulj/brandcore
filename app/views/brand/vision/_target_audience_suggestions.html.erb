<div id="target_audience_suggestions">
  <% if audiences.any? %>
    <div class="space-y-3">
      <p class="text-sm font-medium text-gray-700">
        <i class="fa-solid fa-sparkles mr-1"></i>
        Click suggestions to add them:
      </p>

      <div class="flex flex-wrap gap-2">
        <% audiences.each do |audience| %>
          <%= form_with model: brand.brand_vision,
                        url: brand_vision_path(brand),
                        method: :patch,
                        data: { turbo: true } do |f| %>
            <% current_audiences = brand.brand_vision.audiences || [] %>
            <% new_audiences = (current_audiences + [audience]).uniq %>
            <% new_audiences.each do |a| %>
              <%= f.hidden_field "audiences[]", value: a %>
            <% end %>
            <button type="submit" class="inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-50 text-green-700 border border-green-200 hover:bg-green-100 cursor-pointer transition-colors">
              <i class="fa-solid fa-plus mr-1 text-xs"></i>
              <%= audience %>
            </button>
          <% end %>
        <% end %>
      </div>
    </div>
  <% else %>
    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
      <div class="flex items-center space-x-3">
        <i class="fa-solid fa-info-circle text-yellow-600"></i>
        <p class="text-yellow-700 text-sm">No audience suggestions could be generated. Please ensure you have a brand concept or category filled in.</p>
      </div>
    </div>
  <% end %>
</div>
